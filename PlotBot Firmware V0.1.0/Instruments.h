#include "application.h"//needed for all Particle libraries

#ifndef Instruments_h
#define Instruments_h

    #include <inttypes.h>
    #include <math.h>
    #include "Sparkfun_APDS9301.h"
    #include <SparkFun_Photon_Weather_Shield_Library.h>
    #include <SparkFunMAX17043.h>
    #include <DS18B20.h>
    #include <tsl2561.h>
    #include "Devices.h"
    
    extern PlotBotDevice *device;

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // GPIO variables
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    extern int soilTemperaturePin;
    extern int soilMoisturePowerPin;
    extern int soilMoisturePin;
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Soil Variables
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    extern const int      MAXRETRY;
    extern       DS18B20  ds18b20;

    extern double soiltempf;
    extern double soiltempc;
    extern int soilmoisture;
    extern int soilmoisturePercentage;

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Weather Shield Variables
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    extern Weather sensor;
    
    extern double humidity;
    extern double dewptf;
    extern double dewptc;
    extern double tempf;     //Average of the sensors temperature readings, fahrenheit
    extern double tempc;     //Average of the sensors temperature readings, celsius
    extern double pascals;
    extern double baromin;
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Luminosity Variables
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    extern double lux;

    extern APDS9301 apds;
    extern int CH0Level;
    extern int CH1Level;
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Battery Variables
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    extern double batteryVoltage;
    extern double batterySoc;
    extern int batteryAlert;
    
    extern int collectionTime;

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Function Prototypes
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    void getSoilTemp();
    int getSoilMoisture();
    int averageAnalogRead(int analogPin);
    void getBatteryInfo();
    double dewPoint(double celsius, double humidity);
    void calcWeatherInfo();
    double getLux();
#endif